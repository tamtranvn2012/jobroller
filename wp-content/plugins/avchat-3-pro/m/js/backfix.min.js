var backDetect={Version:'1.0.0',Description:'Back Button Detection',Browser:{IE:!!(window.attachEvent&&!window.opera),Safari:navigator.userAgent.indexOf('Apple')>-1,Opera:!!window.opera},FrameLoaded:0,FrameTry:0,FrameTimeout:null,OnBack:function(){alert('Back Button Clicked')},BAJBFrame:function(){var BAJBOnBack=document.getElementById('BAJBOnBack');if(backDetect.FrameLoaded>1){if(backDetect.FrameLoaded==2){backDetect.OnBack();history.back()}}backDetect.FrameLoaded++;if(backDetect.FrameLoaded==1){if(backDetect.Browser.IE){backDetect.SetupFrames()}else{backDetect.FrameTimeout=setTimeout("backDetect.SetupFrames();",700)}}},SetupFrames:function(){clearTimeout(backDetect.FrameTimeout);var BBiFrame=document.getElementById('BAJBOnBack');var checkVar=BBiFrame.src.substr(-11,11);if(backDetect.FrameLoaded==1&&checkVar!="HistoryLoad"){BBiFrame.src="blank.html?HistoryLoad"}else{if(backDetect.FrameTry<2&&checkVar!="HistoryLoad"){backDetect.FrameTry++;backDetect.FrameTimeout=setTimeout("backDetect.SetupFrames();",700)}}},SafariHash:'false',Safari:function(){if(backDetect.SafariHash=='false'){if(window.location.hash=='#b'){backDetect.SafariHash='true'}else{window.location.hash='#b'}setTimeout("backDetect.Safari();",100)}else if(backDetect.SafariHash=='true'){if(window.location.hash==''){backDetect.SafariHash='back';backDetect.OnBack();history.back()}else{setTimeout("backDetect.Safari();",100)}}},Initialise:function(){if(backDetect.Browser.Safari){setTimeout("backDetect.Safari();",600)}else{document.write('<iframe src="blank.html" style="display:none;" id="BAJBOnBack" onunload="alert(\'de\')" onload="backDetect.BAJBFrame();"></iframe>')}}};backDetect.Initialise();